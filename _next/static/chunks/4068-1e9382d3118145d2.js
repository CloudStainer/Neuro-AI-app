"use strict";
(self.webpackChunk_N_E = self.webpackChunk_N_E || []).push([
  [4068],
  {
    36434: function (e, t, n) {
      n.d(t, {
        $i: function () {
          return L;
        },
        CM: function () {
          return w;
        },
        DH: function () {
          return E;
        },
        H0: function () {
          return f;
        },
        HS: function () {
          return i;
        },
        Hz: function () {
          return _;
        },
        I9: function () {
          return H;
        },
        Ju: function () {
          return x;
        },
        Mu: function () {
          return U;
        },
        OA: function () {
          return g;
        },
        OM: function () {
          return $;
        },
        P1: function () {
          return h;
        },
        QE: function () {
          return o;
        },
        Qg: function () {
          return z;
        },
        RX: function () {
          return j;
        },
        SF: function () {
          return Z;
        },
        U3: function () {
          return v;
        },
        Uq: function () {
          return M;
        },
        Vx: function () {
          return k;
        },
        Xw: function () {
          return N;
        },
        ZT: function () {
          return l;
        },
        cp: function () {
          return p;
        },
        dB: function () {
          return P;
        },
        eF: function () {
          return q;
        },
        fU: function () {
          return X;
        },
        gQ: function () {
          return D;
        },
        gT: function () {
          return F;
        },
        gv: function () {
          return C;
        },
        kL: function () {
          return y;
        },
        l3: function () {
          return u;
        },
        l8: function () {
          return d;
        },
        np: function () {
          return r;
        },
        nv: function () {
          return c;
        },
        qN: function () {
          return m;
        },
        qX: function () {
          return S;
        },
        qb: function () {
          return s;
        },
        sX: function () {
          return b;
        },
        uR: function () {
          return I;
        },
        vz: function () {
          return T;
        },
        zD: function () {
          return R;
        },
        zh: function () {
          return O;
        },
      }),
        n(83079);
      var a = n(12119);
      (0, a.$)("87634451a98d62c3a70cb87dc7acb6c5d4961437");
      var c = (0, a.$)("9e664886e779727f413e12387e4dada85e100ac7"),
        d = (0, a.$)("da7861783e2186a711fe7d4de13595826a4e167c"),
        o = (0, a.$)("713b0f6ab709e40ce6b23ad29f0358fa7de3de62");
      (0, a.$)("b7e015eace55de4d8df5c0ba276d37ce7ce6123a");
      var i = (0, a.$)("9a3dbd652156642f23893d3b76a301ddb0292115"),
        r = (0, a.$)("8c3790b07cdd674cef48a2624ec8361ec67f5f01"),
        f = (0, a.$)("510e84f41c9d605256bcb3401795354c2cde0a37"),
        u = (0, a.$)("66a486c3517b9d7cd958c10d381f9b2cc8842b68"),
        l = (0, a.$)("d6d718c1367869ab29d454ecd74b0b946697b1a7"),
        b = (0, a.$)("d99a89f4bcc68f185c485516ac976c83d931288e"),
        s = (0, a.$)("34e09870ba8f36dfeceac10b4d292fe8f8f8996c");
      (0, a.$)("84fdd50c5ece5ab63873089ab3a58a49be853f3b");
      var v = (0, a.$)("3c873a625899eb479dcd9c22222ac4f5e162eb80"),
        m = (0, a.$)("0c75a896e5062375d37f0d0ee44989a90549bbf3"),
        p = (0, a.$)("f7f0e2bee436b5a600e9492d50cd0e4dffbed292"),
        x = (0, a.$)("23c2503e261336d83748d29e1914b450493d1209");
      (0, a.$)("70c4f41df6043a066114d7c21897ec1a251bc305");
      var h = (0, a.$)("705c47264c2738021ad9e9c6835909a1e1535b5f"),
        y = (0, a.$)("3545f9ea02f5e60e4f8d18f0ad51eebe26b6dbae");
      (0, a.$)("a735ba020e94134b46613c5cdf68cf32eead4539");
      var g = (0, a.$)("5d3cbc566dab701059b0e953bbdee8bba40d9c86"),
        w = (0, a.$)("8bbc1557e043f0450eb52be7a872fe70001b2e7f"),
        $ = (0, a.$)("59c8c113c15904c6f03f4e1a6c3e610850bf35bd"),
        j = (0, a.$)("88f7146f7245a8c7d2c7cb19f9ab2766fa5deac5"),
        N = (0, a.$)("33595a802360b4ebfaeea79dc73db01684ded7b3"),
        S = (0, a.$)("9951b9afeddf64a4e6cb32312e22700cd6aa2d74"),
        k = (0, a.$)("f66df43b6723aa7b5f6be8fa03cf92eebd6a310f"),
        P = (0, a.$)("8d8a1afd24b95fe9fc91851c812bfa79b71af09b"),
        _ = (0, a.$)("88f8eac3de742776ce50adad27c6f4f938be59b4"),
        E = (0, a.$)("706eae8d5e90be586dbbef53e45e63f87c9a8d16"),
        U = (0, a.$)("d2adf2421e764edf8b4a67b30c313f6d32d375db"),
        L = (0, a.$)("3198b18971efe37c9d2b38cd7250ec498dac5e82");
      (0, a.$)("e56272dc63266f7e2b8ac58f413bcb84b2f4601f");
      var R = (0, a.$)("3f6344dd4a791a9803d1bccb5cf486cb533100bf");
      (0, a.$)("77d2e5078342ff43cb15159bf40b9e13a43eb35b");
      var C = (0, a.$)("470cb0b50e2fd759ef4190c2c7325a7053da1138"),
        D = (0, a.$)("c2a8a5074122a62733470291c52bea8343d67702"),
        T = (0, a.$)("266d6dc7e0796f59e802a71ac80b2478413f1b41"),
        O = (0, a.$)("1704793413e5fc7b8b3208299ed2822600f2634a"),
        z = (0, a.$)("552297c55ccec08c1f67cd98e040ae3a58229047");
      (0, a.$)("0fee280c1e9f3bb427abca10320ed43a4357f2cc"),
        (0, a.$)("1086014772c3c675b54f9ecf9b0fbe27905ec586");
      var F = (0, a.$)("01149e3e8d6b8e9517e341db88247c7e0ee7d1e8"),
        H = (0, a.$)("ba4c9ecfdc114d26fa22e156903824a3a0cbb60c");
      (0, a.$)("6c84442766039a9716f55d26902ae844318a823e");
      var I = (0, a.$)("4c15b1d0bb8b01a44b2eca8a8018b3c5fde22f90"),
        q = (0, a.$)("fb3f95effad1be1c911471be851d05d390ccf5d1");
      (0, a.$)("b2a9166af6747c6e19da711bc44569c4a8499d3f"),
        (0, a.$)("c423d11e3dbfb92fed4a4ed61b6d7d16cfac15db");
      var M = (0, a.$)("959bc6252a38c5cfddbce01c6d1fd72d67b98ff7"),
        X = (0, a.$)("75ca93ae64150cfb534ebde03ad7cd09f27f54f2"),
        Z = (0, a.$)("79d6b32ee7bfabd513110486c32824f43a53b68d");
    },
    95279: function (e, t, n) {
      var a = n(57437),
        c = n(11475),
        d = n(2265),
        o = n(54887),
        i = n(74599),
        r = n(98364),
        f = n(67491),
        u = n(33145);
      t.Z = (e) => {
        var t, n;
        let {
            imageFile: l,
            imageURL: b,
            getTranscript: s,
            isOpen: v,
            onClose: m,
            buttonText: p,
            cancelButton: x,
            setImageArray: h,
            isVideo: y,
            setAudioTranscript: g,
          } = e,
          [w, $] = (0, d.useState)(void 0),
          [j, N] = (0, d.useState)(!1),
          [S, k] = (0, d.useState)(""),
          [P, _] = (0, d.useState)(!1);
        async function E(e) {
          var t, n;
          let a = await fetch(e);
          a.ok ||
            console.log(
              "Failed to fetch image from "
                .concat(e.toString(), ". Status: ")
                .concat(a.status)
            );
          let c =
            null !== (t = a.headers.get("content-type")) && void 0 !== t
              ? t
              : void 0;
          return (
            c &&
              !c.startsWith("image/") &&
              console.log(
                "Retrieved content type (".concat(c, ") is not an image")
              ),
            new File(
              [await a.blob()],
              null !==
                (n = (function (e) {
                  let t = e.split("/");
                  return t[t.length - 1];
                })(e)) && void 0 !== n
                ? n
                : "temp",
              { type: c }
            )
          );
        }
        async function U(e) {
          let t,
            n =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : 1,
            a = URL.createObjectURL(e),
            c = document.createElement("video");
          async function d() {
            t && t(1);
          }
          for (
            c.addEventListener("seeked", d), c.src = a;
            (c.duration === 1 / 0 || isNaN(c.duration)) && c.readyState < 2;

          )
            await new Promise((e) => setTimeout(e, 1e3)),
              (c.currentTime = 1e7 * Math.random());
          let o = c.duration;
          console.log(a, o);
          let i = document.createElement("canvas"),
            r = i.getContext("2d"),
            [f, u] = [c.videoWidth, c.videoHeight];
          (i.width = f), (i.height = u);
          let l = [],
            b =
              o > 180 ? (o > 300 ? (o > 480 ? 15 / n : 10 / n) : 5 / n) : 1 / n;
          console.log(b);
          let s = 0;
          for (; s < o; ) {
            (c.currentTime = s),
              await new Promise((e) => (t = e)),
              null == r || r.drawImage(c, 0, 0, f, u);
            let e = i.toDataURL();
            l.push(e), (s += b);
          }
          return h && h(l), { frames: l, transcription: "" };
        }
        if (
          ((0, d.useEffect)(() => {
            if (l) {
              let e;
              return (
                "image/heic" === l.type || "image/heif" === l.type
                  ? void 0 !== window &&
                    (0, r.e)(l)
                      .then((t) => {
                        $((e = t));
                      })
                      .catch((e) => {
                        console.error(e);
                      })
                  : $((e = URL.createObjectURL(l))),
                () => {
                  URL.revokeObjectURL(e);
                }
              );
            }
          }, [l]),
          !v)
        )
          return null;
        async function L() {
          if (l) {
            console.log(l.type);
            try {
              var e, t, n, a, d;
              if ("image/heic" === l.type || "image/heif" === l.type)
                void 0 !== window &&
                  (0, r.e)(l)
                    .then(async (e) => {
                      N(!0);
                      let t = await E(e),
                        n = await (0, c.Z)(t);
                      N(!1),
                        s({ frames: [...n.toString()], transcription: "" });
                    })
                    .catch((e) => {
                      console.error(e);
                    });
              else if (
                (null == l ? void 0 : l.type) === "video/mp4" ||
                (null == l ? void 0 : l.type) === "video/MP4" ||
                (null == l ? void 0 : l.type) === "video/x-m4v" ||
                (null == l ? void 0 : l.type) === "video/*" ||
                (null == l ? void 0 : l.type) === "video/quicktime" ||
                (null == l ? void 0 : l.type) === "video/3gpp" ||
                (null == l ? void 0 : l.type) === "video/webm" ||
                (null == l ? void 0 : l.type) === "video/avi" ||
                (null == l ? void 0 : l.type) === "video/msvideo" ||
                (null == l ? void 0 : l.type) === "video/x-msvideo" ||
                (null == l ? void 0 : l.type) === "video/webm;codecs=h264"
              ) {
                N(!0);
                let a = await U(l),
                  c = { text: "" };
                g &&
                  g(null !== (e = c.text.toString()) && void 0 !== e ? e : ""),
                  s({
                    frames: null !== (t = a.frames) && void 0 !== t ? t : [],
                    transcription:
                      null !== (n = c.text.toString()) && void 0 !== n ? n : "",
                  });
              } else if (
                (null == l ? void 0 : l.type) === "audio/mpeg" ||
                (null == l ? void 0 : l.type) === "audio/mp3" ||
                (null == l ? void 0 : l.type) === "audio/wav" ||
                (null == l ? void 0 : l.type) === "audio/ogg" ||
                (null == l ? void 0 : l.type) === "audio/webm" ||
                (null == l ? void 0 : l.type) === "audio/x-wav" ||
                (null == l ? void 0 : l.type) === "audio/x-ms-wma" ||
                (null == l ? void 0 : l.type) === "audio/vnd.wave" ||
                (null == l ? void 0 : l.type) === "audio/wave" ||
                (null == l ? void 0 : l.type) === "audio/x-pn-wav" ||
                (null == l ? void 0 : l.type) === "audio/x-wav" ||
                (null == l ? void 0 : l.type) === "audio/x-ms-wma" ||
                (null == l ? void 0 : l.type) === "audio/x-m4a"
              ) {
                N(!0);
                let e = new FormData();
                e.append("file", l), e.append("model", "whisper-1"), N(!1);
                let t = await fetch(
                  "https://api.openai.com/v1/audio/transcriptions",
                  {
                    method: "POST",
                    headers: {
                      Authorization: "Bearer ".concat(
                        f.O.NEXT_PUBLIC_OPENAI_API_KEY
                      ),
                    },
                    body: e,
                  }
                );
                t.ok ||
                  console.log("HTTP error! Status: ".concat(await t.json()));
                let n = await t.json();
                g &&
                  (g(null !== (a = n.text.toString()) && void 0 !== a ? a : ""),
                  console.log(n.text.toString())),
                  s({
                    frames: [],
                    transcription:
                      null !== (d = n.text.toString()) && void 0 !== d ? d : "",
                  });
              } else {
                N(!0);
                let e = await (0, c.Z)(l);
                N(!1), s({ frames: [...e.toString()], transcription: "" });
              }
            } catch (e) {
              N(!1);
            }
          } else b && s({ frames: [...b], transcription: "" });
        }
        let R =
          null !== (t = null != w ? w : b) && void 0 !== t
            ? t
            : "/assets/image-icon.png";
        return (0, o.createPortal)(
          (0, a.jsxs)("div", {
            className:
              "fixed inset-0 z-50 flex flex-row items-center justify-center bg-black bg-opacity-50 p-4",
            children: [
              (0, a.jsx)("div", {
                className:
                  " h-fit w-4/5 overflow-hidden overflow-y-auto rounded-xl border border-[#DDDDF0]/50 bg-[#161618] bg-opacity-95 shadow-2xl md:w-8/12",
                children: (0, a.jsxs)("div", {
                  className: "relative px-4 py-8 text-center md:px-10",
                  children: [
                    (0, a.jsxs)("div", {
                      className: "flex items-center justify-between",
                      children: [
                        (0, a.jsx)("h3", {
                          className:
                            "mb-4 mt-4 flex-1 text-center text-lg font-semibold text-white md:mt-8 md:text-xl",
                          children: "Video Preview",
                        }),
                        (0, a.jsx)("button", {
                          type: "button",
                          onClick: () => {
                            _(!1), $(void 0), m();
                          },
                          className:
                            "absolute right-5 top-5 rounded-full border border-white/60 px-2 text-white transition duration-150 ease-in-out hover:bg-gray-700",
                          children: "\xd7",
                        }),
                      ],
                    }),
                    (0, a.jsx)("div", {
                      className: "mb-8 mt-4 flex items-center justify-center",
                      children: (0, a.jsx)("div", {
                        className:
                          "shadow-3xl inline-flex items-center justify-center rounded-2xl border border-white bg-[#111112] p-2 shadow-[0_0_15px_5px_rgba(75,75,75,0.5)]",
                        children: y
                          ? (0, a.jsx)("video", {
                              src: R,
                              className:
                                "h-48 w-48 object-contain md:h-[26rem] md:w-[26rem]",
                              autoPlay: !0,
                              controls: !0,
                            })
                          : (0, a.jsx)(u.default, {
                              src: R,
                              alt: "Preview",
                              width: 500,
                              height: 500,
                              className:
                                "h-48 w-48 object-contain md:h-[26rem] md:w-[26rem]",
                              unoptimized: !0,
                            }),
                      }),
                    }),
                    (0, a.jsxs)("div", {
                      className:
                        "mt-4 flex justify-center space-x-2 md:space-x-4",
                      children: [
                        x &&
                          (0, a.jsx)("button", {
                            type: "button",
                            onClick: () => {
                              _(!1), $(void 0), m();
                            },
                            className:
                              "px-3 py-2 text-sm text-red-800 underline transition duration-300 hover:text-red-900 focus:outline-none md:px-6 md:text-base",
                            children: "Cancel",
                          }),
                        "Download" == p
                          ? (0, a.jsx)("a", {
                              href: null != b ? b : "",
                              rel: "noopener noreferrer",
                              download: b,
                              target: "_blank",
                              className:
                                "rounded-full bg-gray-500 px-3 py-2 text-sm font-bold text-white transition duration-300 hover:bg-gray-600 focus:outline-none md:px-6 md:text-base",
                              children: p,
                            })
                          : (0, a.jsx)("button", {
                              type: "button",
                              onClick: L,
                              className:
                                "rounded-full bg-gray-500 px-3 py-2 text-sm font-bold text-white transition duration-300 hover:bg-gray-600 focus:outline-none md:px-6 md:text-base",
                              children: j ? "uploading..." : p,
                            }),
                      ],
                    }),
                  ],
                }),
              }),
              (0, a.jsx)(i.Z, { message: S, show: P }),
            ],
          }),
          null !== (n = document.getElementById("modal-root")) && void 0 !== n
            ? n
            : document.body
        );
      };
    },
  },
]);
